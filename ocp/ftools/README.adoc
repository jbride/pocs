== Build and Push:

-----
$ podman build --rm -t quay.io/rhtgptetraining/fedoratools:2.16 .
-----

-----
$ podman login quay.io -u rhtgptetraining
$ podman push quay.io/rhtgptetraining/fedoratools:2.16

$ skopeo inspect docker://quay.io/rhtgptetraining/fedoratools:2.16            # View details of the image in the remote docker registry
-----

== Execution:

. podman
+
-----
$ podman run --rm -d --name=ftools quay.io/rhtgptetraining/fedoratools:2.16
$ podman exec -it ftools /bin/bash
-----

. OpenShift
+

-----
$ oc tag --source=docker quay.io/rhtgptetraining/fedoratools:2.16 fedoratools:2.16                                                        :   create image stream
$ cm_name=emergency-console-config \
      && sa_name=emergency-console \
      && M2_MIRROR_URL='http:\/\/nexus.er-tools:8081\/content\/groups\/public' \
      && cat ftools-deploy.yml \
      | sed -e "s/{{ m2_mirror_url }}/$M2_MIRROR_URL/g" \
      | sed -e "s/{{ configmap_name }}/$cm_name/g" \
      | sed -e "s/{{ sa_name }}/$sa_name/g" \
      | oc create -f -                                                                                                                    :   createa a deployment, service and pvc
-----

== Utilize

. rsh into pod
+
-----
-----

. change directories into /build directory and build a maven project
+
-----
$ cd /build && git clone test.git && cd test
$ mvn -s /settings clean package -DskipTests
-----

== Other

#   sidecar
#       dc_name=rhpam-kieserver
#       oc patch dc/$dc_name --type=json -p "[{\"op\": \"add\", \"path\": \"/spec/template/spec/containers/1\", \"value\": { \"name\": \"ftools\", \"image\": \"quay.io/rhtgptetraining/fedoratools:2.16\", \"imagePullPolicy\": \"Always\", \"resources\": { \"limits\": {\"cpu\": \"100m\",\"memory\": \"256Mi\"}} }}]"

. Execution: Istio enabled
+
-----
$ istioctl kube-inject -f ftools-deploy.yml > $HOME/lab/ftools-istio.yml
$ oc create -f $HOME/lab/ftools-istio.yml
-----

